<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[说明]]></title>
    <url>%2F2018%2F09%2F14%2F%E8%AF%B4%E6%98%8E%2F</url>
    <content type="text"><![CDATA[欢迎大家访问小龙的个人博客,以后这里就是我的小窝啦,希望大家多来看看我鸭。（这个博客暂时还未实现任何功能） 虽然功能没有但是本着既然来了就不能让dalao白来的原则小弟在这粘一段从其他dalao抄来的以词云的方式统计微信好友情况的代码吧import itchatimport numpy as npfrom os import pathfrom wordcloud import WordCloud, STOPWORDS, ImageColorGeneratorfrom PIL import Imageimport randomimport osimport reimport matplotlib.pyplot as pltimport ioimport jieba'''itchat.auto_login(hotReload = True)# 爬取自己好友的相关信息, 返回一个json文件friends = itchat.get_friends(update = True)[0:]'''def parse_friends(): itchat.login() text = dict() friends = itchat.get_friends(update = True) male = "male" female = "female" other = "other" for i in friends[1:]: sex = i['Sex'] if sex == 1: text[male] = text.get(male, 0) + 1 #dict.get(key,default)返回键的值, 若不存在则返回default elif sex == 2: text[female] = text.get(female, 0) + 1 else: text[other] = text.get(other, 0) + 1 total = len(friends[1:]) print("男性好友: %.2f%%" % (float(text[male]) / total *100) + "\n" + "女性好友: %.2f%%" % (float(text[female]) / total *100) + "\n" + "不明性别好友: %.2f%%" % (float(text[other]) / total *100) ) draw(text)def draw(datas): for key in datas.keys(): plt.bar(key, datas[key]) plt.legend() plt.xlabel('sex') plt.ylabel('rate') plt.title("Gender of Alfred's friends") plt.show() def parse_signature(): itchat.auto_login(hotReload = True) siglist = [] friends = itchat.get_friends(update = True)[1:] for i in friends: signature = i["Signature"].strip().replace("span", "").replace("class", "").replace("emoji", "") rep = re.compile("1f\d+\w*|[&lt;&gt;/=]") signature = rep.sub("", signature) siglist.append(signature) text = "".join(siglist) with io.open('text.txt', 'w', encoding = 'utf-8') as f: wordlist = jieba.cut(text, cut_all = True) word_space_split = " ".join(wordlist) f.write(word_space_split) f.close() def draw_signature(): text = open(u'text.txt', encoding ='utf-8').read() coloring = np.array(Image.open('jingqi_de_katong_dongwu-005.jpg')) my_wordcloud = WordCloud(background_color = "white", max_words = 2000, mask = coloring, max_font_size = 60, random_state = 42, scale = 2, font_path = "DroidSansFallbackFull.ttf").generate(text) image_colors = ImageColorGenerator(coloring) plt.imshow(my_wordcloud.recolor(color_func = image_colors)) plt.imshow(my_wordcloud) plt.axis("off") plt.savefig("D:/PyProgram/cloud.jpg", dpi = 200) # 如果savefig放在plt.show()后面会造成保存空白图的问题 plt.show() #parse_friends()#parse_signature()#draw_signature() 最后还是给大家劈个叉，祝各位晚安吧。 未完待续….]]></content>
  </entry>
</search>
